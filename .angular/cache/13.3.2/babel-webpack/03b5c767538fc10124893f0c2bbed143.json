{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"@angular/router\";\nexport let FrNewsComponent = /*#__PURE__*/(() => {\n  class FrNewsComponent {\n    constructor(elementRef, http) {\n      this.elementRef = elementRef;\n      this.http = http;\n      this.newsload = '';\n      this.isCollapsed = true;\n    }\n\n    ngOnInit() {\n      this.getInfo();\n      this.getlocation();\n    }\n\n    getInfo() {\n      const httpOptions = {\n        headers: new HttpHeaders()\n      };\n      httpOptions.headers.append('Access-Control-Allow-Origin', '*');\n      httpOptions.headers.append('Content-Type', 'application/json');\n      httpOptions.headers.append('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n      var loc = localStorage.getItem(\"currentpos\");\n      this.http.get(\"https://greencity-tn-default-rtdb.europe-west1.firebasedatabase.app/problems/\" + loc + \"/.json\", httpOptions).subscribe(responseData => {\n        if (typeof responseData == \"object\") {\n          var c = {};\n          Object.entries(responseData).map(a => {\n            Object.entries(a[1]).map(b => {\n              // @ts-ignore\n              document.getElementById(\"news\").insertAdjacentHTML('afterend', '  <div class=\"card bg-light mb-3\" style=\"width: 21rem;\">    <p> &nbsp;<img class=\"text-end\" src=\"assets/img/' + b[1].type + '.png\" width=\"40\" height=\"40\">      &nbsp;&nbsp;    <img src=\"/assets/img/person-fill.png\" width=\"20\" height=\"20\" style=\" float: center;\" alt=\"\"> ' + b[1].name + ' &nbsp;&nbsp;         </p>    <img class=\"card-img-top\" src=\"' + b[1].picture1 + '\" alt=\"Card image cap\">        <div class=\"card-body\">      <h5 class=\"card-title\">' + b[1].title + '</h5>      <p class=\"card-text\">' + b[1].subject + '</p>      <p>        <button id=\"' + b[0] + 'btn\" \"type=\"button\" class=\"btn btn-outline-success\" (click)=\"collapse(' + \"'\" + b[0] + \"'\" + ')\">          Plus d' + \"'\" + 'informations        </button>      </p>             <div  class=\"card\" >          <div id=\"' + b[0] + '\" style=\"display:none\" class=\"card-body\"> ' + b[1].description + '                  <table><tr>  <td>    <img src=\"' + b[1].picture2 + '\" width=\"132\" height=\"107\">  </td>  <td>    <img src=\"' + b[1].picture3 + '\" width=\"132\" height=\"107\">  </td></tr><tr>  <td>    <img src=\"' + b[1].picture4 + '\" width=\"132\" height=\"107\">  </td>  <td>    <img src=\"' + b[1].picture5 + '\" width=\"132\" height=\"107\">  </td></tr>            </table></div>      </div>  <img src=\"/assets/img/calendar.png\" width=\"20\" height=\"20\" style=\" float: center;\" alt=\"\">&nbsp;' + b[1].date + '  </div>  </div>');\n              this.elementRef.nativeElement.querySelector('#' + b[0] + 'btn').addEventListener('click', this.collapse.bind(this));\n            });\n          });\n        }\n      });\n    } // @ts-ignore\n\n\n    collapse(str) {\n      if (typeof str == \"object\") {\n        var x = str.srcElement.id;\n      } else {\n        x = str;\n      }\n\n      x = x.replace('btn', ''); // @ts-ignore\n\n      if (document.getElementById(x).style.display == \"none\") {\n        // @ts-ignore\n        document.getElementById(x).style.display = \"block\";\n      } else {\n        // @ts-ignore\n        document.getElementById(x).style.display = \"none\";\n      }\n    }\n\n    getlocation() {\n      var locs = [{\n        city: \"Tunis\",\n        lat: 36.8008,\n        lng: 10.18\n      }, {\n        city: \"Sfax\",\n        lat: 34.74,\n        lng: 10.76\n      }, {\n        city: \"Sousse\",\n        lat: 35.8333,\n        lng: 10.6333\n      }, {\n        city: \"Kairouan\",\n        lat: 35.6833,\n        lng: 10.1\n      }, {\n        city: \"Metouia\",\n        lat: 33.96,\n        lng: 10\n      }, {\n        city: \"Kebili\",\n        lat: 33.705,\n        lng: 8.965\n      }, {\n        city: \"Bizerte\",\n        lat: 37.2744,\n        lng: 9.8739\n      }, {\n        city: \"Sidi Bouzid\",\n        lat: 35.0381,\n        lng: 9.4858\n      }, {\n        city: \"Gabes\",\n        lat: 33.8814,\n        lng: 10.0983\n      }, {\n        city: \"Ariana\",\n        lat: 36.8625,\n        lng: 10.1956\n      }, {\n        city: \"Jendouba\",\n        lat: 36.5011,\n        lng: 8.7803\n      }, {\n        city: \"Gafsa\",\n        lat: 34.4167,\n        lng: 8.7833\n      }, {\n        city: \"Msaken\",\n        lat: 35.7333,\n        lng: 10.5833\n      }, {\n        city: \"Medenine\",\n        lat: 33.3547,\n        lng: 10.5053\n      }, {\n        city: \"Beja\",\n        lat: 36.7256,\n        lng: 9.1817\n      }, {\n        city: \"Kasserine\",\n        lat: 35.1667,\n        lng: 8.8333\n      }, {\n        city: \"Monastir\",\n        lat: 35.778,\n        lng: 10.8262\n      }, {\n        city: \"Hammamet\",\n        lat: 36.4167,\n        lng: 10.6\n      }, {\n        city: \"Tataouine\",\n        lat: 32.9333,\n        lng: 10.45\n      }, {\n        city: \"La Marsa\",\n        lat: 36.8764,\n        lng: 10.3253\n      }, {\n        city: \"Ben Arous\",\n        lat: 36.7531,\n        lng: 10.2189\n      }, {\n        city: \"Sakiet ez Zit\",\n        lat: 34.8,\n        lng: 10.77\n      }, {\n        city: \"Zarzis\",\n        lat: 33.5,\n        lng: 11.1167\n      }, {\n        city: \"Ben Gardane\",\n        lat: 33.1389,\n        lng: 11.2167\n      }, {\n        city: \"Mahdia\",\n        lat: 35.5047,\n        lng: 11.0622\n      }, {\n        city: \"Houmt Souk\",\n        lat: 33.8667,\n        lng: 10.85\n      }, {\n        city: \"Fouchana\",\n        lat: 36.6987,\n        lng: 10.1693\n      }, {\n        city: \"Le Kram\",\n        lat: 36.8333,\n        lng: 10.3167\n      }, {\n        city: \"Le Bardo\",\n        lat: 36.8092,\n        lng: 10.1406\n      }, {\n        city: \"El Kef\",\n        lat: 36.1667,\n        lng: 8.7\n      }, {\n        city: \"El Hamma\",\n        lat: 33.8864,\n        lng: 9.7951\n      }, {\n        city: \"Nabeul\",\n        lat: 36.4514,\n        lng: 10.7361\n      }, {\n        city: \"Djemmal\",\n        lat: 35.64,\n        lng: 10.76\n      }, {\n        city: \"Korba\",\n        lat: 36.5667,\n        lng: 10.8667\n      }, {\n        city: \"Menzel Temime\",\n        lat: 36.7833,\n        lng: 10.9833\n      }, {\n        city: \"Ghardimaou\",\n        lat: 36.4503,\n        lng: 8.4397\n      }, {\n        city: \"Menzel Bourguiba\",\n        lat: 37.15,\n        lng: 9.7833\n      }, {\n        city: \"Radès\",\n        lat: 36.7667,\n        lng: 10.2833\n      }, {\n        city: \"Manouba\",\n        lat: 36.8,\n        lng: 10.1\n      }, {\n        city: \"Kelibia\",\n        lat: 36.8475,\n        lng: 11.0939\n      }, {\n        city: \"Rass el Djebel\",\n        lat: 37.215,\n        lng: 10.12\n      }, {\n        city: \"Tebourba\",\n        lat: 36.8295,\n        lng: 9.8411\n      }, {\n        city: \"El Jem\",\n        lat: 35.3,\n        lng: 10.7167\n      }, {\n        city: \"Douz\",\n        lat: 33.4572,\n        lng: 9.0258\n      }, {\n        city: \"Hammam Sousse\",\n        lat: 35.8589,\n        lng: 10.5939\n      }, {\n        city: \"Hammam-Lif\",\n        lat: 36.7308,\n        lng: 10.3275\n      }, {\n        city: \"Sbiba\",\n        lat: 35.5433,\n        lng: 9.0736\n      }, {\n        city: \"Sejenane\",\n        lat: 37.0564,\n        lng: 9.2382\n      }, {\n        city: \"Tozeur\",\n        lat: 33.9197,\n        lng: 8.1336\n      }, {\n        city: \"Dar Chabanne\",\n        lat: 36.47,\n        lng: 10.75\n      }, {\n        city: \"Aine Draham\",\n        lat: 36.7833,\n        lng: 8.7\n      }, {\n        city: \"Bou Salem\",\n        lat: 36.6111,\n        lng: 8.9698\n      }, {\n        city: \"Ez Zahra\",\n        lat: 36.7439,\n        lng: 10.3083\n      }, {\n        city: \"Skhira\",\n        lat: 34.3006,\n        lng: 10.0708\n      }, {\n        city: \"Akouda\",\n        lat: 35.8712,\n        lng: 10.5712\n      }, {\n        city: \"Mateur\",\n        lat: 37.04,\n        lng: 9.665\n      }, {\n        city: \"Rhennouch\",\n        lat: 33.9397,\n        lng: 10.065\n      }, {\n        city: \"Dahmani\",\n        lat: 35.9424,\n        lng: 8.8284\n      }, {\n        city: \"El Alia\",\n        lat: 37.1667,\n        lng: 10.0333\n      }, {\n        city: \"Siliana\",\n        lat: 36.0819,\n        lng: 9.3747\n      }, {\n        city: \"Zaghouan\",\n        lat: 36.4028,\n        lng: 10.1433\n      }];\n      var lat = 0;\n      var lng = 0;\n\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n          lng = position.coords.longitude;\n          lat = position.coords.latitude;\n          var cc = \"Tunis\";\n          var clat = 36.8008;\n          var clng = 10.18;\n          locs.forEach(function (arrayItem) {\n            if (Math.abs(lat - arrayItem.lat + (lng - arrayItem.lng)) < Math.abs(lat - clat + (lng - clng))) {\n              cc = arrayItem.city;\n              clat = arrayItem.lat;\n              clng = arrayItem.lng;\n            }\n          });\n          document.getElementById('currentposition').innerHTML = '<img src=\"/assets/img/location.png\" width=\"15\" height=\"20\" class=\"d-inline-block align-top\"alt=\"\"> ' + cc;\n          localStorage.setItem(\"currentpos\", cc);\n        });\n      } else {\n        console.log(\"No support for geolocation\");\n      }\n    }\n\n  }\n\n  FrNewsComponent.ɵfac = function FrNewsComponent_Factory(t) {\n    return new (t || FrNewsComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  FrNewsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FrNewsComponent,\n    selectors: [[\"app-fr-news\"]],\n    decls: 71,\n    vars: 0,\n    consts: [[1, \"navbar\", \"fixed-top\", \"navbar-dark\", \"bg-success\", \"justify-content-between\", \"py-0\"], [\"src\", \"/assets/img/logo.png\", \"width\", \"60\", \"height\", \"40\", \"alt\", \"\", 1, \"\"], [1, \"text-center\"], [\"id\", \"currentposition\", 1, \"text-center\"], [\"src\", \"/assets/img/location.png\", \"width\", \"15\", \"height\", \"20\", \"alt\", \"\", 1, \"d-inline-block\", \"align-top\"], [\"ngbDropdown\", \"\", 1, \"d-inline-block\"], [\"myDrop\", \"ngbDropdown\"], [\"id\", \"dropdownManual\", \"ngbDropdownAnchor\", \"\", 1, \"btn\", \"btn-outline-secondary\", 3, \"focus\"], [\"src\", \"/assets/img/settings.png\", \"width\", \"30\", \"height\", \"25\", \"alt\", \"\"], [\"ngbDropdownMenu\", \"\", \"aria-labelledby\", \"dropdownManual\"], [\"routerLink\", \"/fr-news-all\", \"ngbDropdownItem\", \"\"], [\"src\", \"/assets/img/documents.png\", \"width\", \"30\", \"height\", \"25\", \"alt\", \"\", 1, \"rounded\", \"ms-auto\"], [\"routerLink\", \"/fr-news\", \"ngbDropdownItem\", \"\"], [\"src\", \"/assets/img/fr.png\", \"width\", \"30\", \"height\", \"25\", \"alt\", \"\", 1, \"rounded\", \"ms-auto\"], [\"routerLink\", \"/ar-news\", \"ngbDropdownItem\", \"\"], [\"src\", \"/assets/img/tn.png\", \"width\", \"30\", \"height\", \"25\", \"alt\", \"\", 1, \"rounded\", \"ms-auto\"], [\"routerLink\", \"/en-news\", \"ngbDropdownItem\", \"\"], [\"src\", \"/assets/img/en.png\", \"width\", \"30\", \"height\", \"25\", \"alt\", \"\", 1, \"rounded\", \"ms-auto\"], [1, \"container\", 2, \"background-image\", \"url('/assets/img/background.jpeg')\", \"background-repeat\", \"no-repeat\", \"background-size\", \"100% 100%\", \"background-attachment\", \"fixed\"], [\"id\", \"news\", 1, \"container\", 2, \"background-image\", \"url('/assets/img/background.jpeg')\", \"background-repeat\", \"no-repeat\", \"background-size\", \"100% 100%\", \"background-attachment\", \"fixed\"], [1, \"navbar\", \"fixed-bottom\", \"navbar-light\", \"bg-dark\"], [\"routerLink\", \"/fr-profile\", \"src\", \"/assets/img/fr-profile.png\", \"width\", \"38\", \"height\", \"50\", \"alt\", \"\", 1, \"center\"], [\"routerLink\", \"/fr-news\", \"src\", \"/assets/img/fr-news.png\", \"width\", \"38\", \"height\", \"50\", \"alt\", \"\", 1, \"center\"], [\"routerLink\", \"/fr-report\", \"src\", \"/assets/img/fr-detect.png\", \"width\", \"38\", \"height\", \"50\", \"alt\", \"\", 1, \"center\"], [\"routerLink\", \"/fr-events\", \"src\", \"/assets/img/fr-table.png\", \"width\", \"38\", \"height\", \"50\", \"alt\", \"\", 1, \"center\"], [\"routerLink\", \"/fr-info\", \"src\", \"/assets/img/fr-others.png\", \"width\", \"38\", \"height\", \"50\", \"alt\", \"\", 1, \"center\"]],\n    template: function FrNewsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelement(0, \"br\")(1, \"br\");\n        i0.ɵɵelementStart(2, \"nav\", 0)(3, \"div\");\n        i0.ɵɵtext(4, \" \\u00A0 \");\n        i0.ɵɵelement(5, \"img\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\")(7, \"h5\", 2);\n        i0.ɵɵtext(8, \" Actualit\\u00E9s\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"h6\", 3);\n        i0.ɵɵelement(10, \"img\", 4);\n        i0.ɵɵtext(11, \"position actuel\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 2)(13, \"div\", 5, 6)(15, \"button\", 7);\n        i0.ɵɵlistener(\"focus\", function FrNewsComponent_Template_button_focus_15_listener() {\n          i0.ɵɵrestoreView(_r1);\n\n          const _r0 = i0.ɵɵreference(14);\n\n          return _r0.open();\n        });\n        i0.ɵɵelement(16, \"img\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 9)(18, \"button\", 10);\n        i0.ɵɵelement(19, \"img\", 11);\n        i0.ɵɵtext(20, \"\\u00A0Tous les probl\\u00E8mes\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 12);\n        i0.ɵɵelement(22, \"img\", 13);\n        i0.ɵɵtext(23, \"\\u00A0Fran\\u00E7ais\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"button\", 14);\n        i0.ɵɵelement(25, \"img\", 15);\n        i0.ɵɵtext(26, \"\\u00A0\\u0639\\u0631\\u0628\\u064A\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"button\", 16);\n        i0.ɵɵelement(28, \"img\", 17);\n        i0.ɵɵtext(29, \"\\u00A0English\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtext(30, \" \\u00A0 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 18)(32, \"div\", 19);\n        i0.ɵɵtext(33, \" \\u00A0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"br\")(35, \"br\")(36, \"br\")(37, \"br\")(38, \"br\")(39, \"br\")(40, \"br\")(41, \"br\")(42, \"br\")(43, \"br\")(44, \"br\")(45, \"br\")(46, \"br\")(47, \"br\")(48, \"br\")(49, \"br\")(50, \"br\")(51, \"br\")(52, \"br\")(53, \"br\")(54, \"br\")(55, \"br\")(56, \"br\")(57, \"br\")(58, \"br\")(59, \"br\")(60, \"br\")(61, \"br\")(62, \"br\")(63, \"br\")(64, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"nav\", 20);\n        i0.ɵɵelement(66, \"img\", 21)(67, \"img\", 22)(68, \"img\", 23)(69, \"img\", 24)(70, \"img\", 25);\n        i0.ɵɵelementEnd();\n      }\n    },\n    directives: [i2.NgbNavbar, i2.NgbDropdown, i2.NgbDropdownAnchor, i2.NgbDropdownMenu, i3.RouterLink, i2.NgbDropdownItem],\n    styles: [\"\"]\n  });\n  return FrNewsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}