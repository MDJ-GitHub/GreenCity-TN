{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { SHA256, enc } from \"crypto-js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(elementRef, http, _router) {\n      this.elementRef = elementRef;\n      this.http = http;\n      this._router = _router;\n      this.title = 'Greencity';\n    }\n\n    ngOnInit() {\n      localStorage.setItem(\"newversion\", \"8\");\n\n      if (localStorage.getItem(\"oldversion\")) {\n        // @ts-ignore\n        var a = localStorage.getItem(\"oldversion\"); // @ts-ignore\n\n        var b = localStorage.getItem(\"newversion\");\n\n        if (localStorage.getItem(\"oldversion\") != localStorage.getItem(\"newversion\")) {\n          alert(\"Les dernières mises à jour ! :  \\n Version Ancienne : v\" + a + \"\\n Version Nouvelle : v\" + b + \"\\n\\n  Ce qui est nouveau ? : \\n - La modification et la suppression des problèmes nouveaux et approuvés fonctionnent pour les grands administrateurs. \\n\\n N'oubliez pas de signaler une anomalie au sein de l'application avec l'interface Contact\"); // @ts-ignore\n\n          localStorage.setItem(\"oldversion\", localStorage.getItem(\"newversion\"));\n        }\n      } else {\n        alert(\"Veuillez activer et accepter l'accès du GPS pour cette application afin qu'elle puisse fonctionner.\");\n      }\n\n      this.startapp();\n    }\n\n    startapp() {\n      var routex = window.location.href;\n\n      if (routex.includes('/a-fr')) {\n        if (localStorage.getItem(\"adminnom\")) {\n          const httpOptions = {\n            headers: new HttpHeaders()\n          };\n          httpOptions.headers.append('Access-Control-Allow-Origin', '*');\n          httpOptions.headers.append('Content-Type', 'application/json');\n          httpOptions.headers.append('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n          var username = localStorage.getItem(\"adminnom\");\n          var password = localStorage.getItem(\"adminp\"); // @ts-ignore\n\n          var cpassword = SHA256(password).toString(enc.Hex); // @ts-ignore\n\n          var x = username.replace(' ', '_');\n          this.http.get(\"https://greencity-tn-default-rtdb.europe-west1.firebasedatabase.app/adminaccounts/\" + x + \"-\" + cpassword + \".json\", httpOptions).subscribe(responseData => {\n            if (responseData != null) {\n              if (routex.includes('/a-fr-home')) {\n                this._router.navigate(['/a-fr-reports']);\n              } else if (routex.includes('/a-fr-reports')) {\n                this._router.navigate(['/a-fr-reports']);\n              } else if (routex.includes('/a-fr-accounts')) {\n                this._router.navigate(['/a-fr-accounts']);\n              } else if (routex.includes('/a-fr-events')) {\n                this._router.navigate(['/a-fr-events']);\n              } else if (routex.includes('/a-fr-messages')) {\n                this._router.navigate(['/a-fr-messages']);\n              } else if (routex.includes('/a-fr-adminaccounts')) {\n                this._router.navigate(['/a-fr-adminaccounts']);\n              } else if (routex.includes('/a-fr-info')) {\n                this._router.navigate(['/a-fr-info']);\n              } else if (routex.includes('/a-fr-approved')) {\n                this._router.navigate(['/a-fr-approved']);\n              } else {\n                this._router.navigate(['/a-fr-home']);\n              }\n            } else {\n              alert(\"Les informations d'identification existantes ne sont plus valides. Veuillez vous connecter avec d'autres informations d'identification.\");\n\n              this._router.navigate(['/a-fr-home']);\n            }\n          });\n        } else {\n          this._router.navigate(['/a-fr-home']);\n        }\n      } else {\n        navigator.geolocation.getCurrentPosition(position => {}, error => {\n          alert(\"Veuillez activer et accepter l'accès du GPS pour cette application afin qu'elle puisse fonctionner.\");\n        });\n\n        if (localStorage.getItem(\"launch\")) {} else {\n          localStorage.setItem(\"launch\", \"0\");\n        }\n\n        if (localStorage.getItem(\"launch\") == \"0\") {\n          this._router.navigate(['/home']);\n        }\n\n        if (localStorage.getItem(\"launch\") == \"fr\") {\n          if (routex.includes('/fr-events')) {\n            this._router.navigate(['/fr-events']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-info')) {\n            this._router.navigate(['/fr-info']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-profile')) {\n            this._router.navigate(['/fr-profile']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-contact')) {\n            this._router.navigate(['/fr-contact']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-conf')) {\n            this._router.navigate(['/fr-conf']);\n\n            return;\n          }\n\n          this._router.navigate(['/fr-news']);\n        }\n\n        if (localStorage.getItem(\"startup\") == \"ar\") {\n          this._router.navigate(['/ar-news']);\n        }\n\n        if (localStorage.getItem(\"startup\") == \"en\") {\n          this._router.navigate(['/en-news']);\n        }\n      }\n    }\n\n    startfr() {\n      localStorage.setItem(\"startup\", \"fr\");\n\n      this._router.navigate(['/fr-news']);\n    }\n\n    startar() {\n      localStorage.setItem(\"startup\", \"ar\");\n\n      this._router.navigate(['/ar-news']);\n    }\n\n    starten() {\n      localStorage.setItem(\"startup\", \"en\");\n\n      this._router.navigate(['/en-news']);\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 1,\n    vars: 0,\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"router-outlet\");\n      }\n    },\n    directives: [i2.RouterOutlet],\n    styles: [\"\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}