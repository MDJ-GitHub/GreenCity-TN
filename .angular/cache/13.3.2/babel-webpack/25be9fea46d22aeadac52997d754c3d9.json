{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { SHA256, enc } from \"crypto-js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(elementRef, http, _router) {\n      this.elementRef = elementRef;\n      this.http = http;\n      this._router = _router;\n      this.title = 'Greencity';\n    }\n\n    ngOnInit() {\n      localStorage.setItem(\"newversion\", \"1\");\n\n      if (localStorage.getItem(\"oldversion\")) {\n        // @ts-ignore\n        var a = localStorage.getItem(\"oldversion\"); // @ts-ignore\n\n        var b = localStorage.getItem(\"newversion\");\n\n        if (localStorage.getItem(\"oldversion\") != localStorage.getItem(\"newversion\")) {\n          alert(\"Les dernières mises à jour ! :  \\n Version Ancienne : v\" + a + \"\\n Version Nouvelle : v\" + b + \"\\n\\n  Il s'agit de la première version de cette application ! \\n En cas de problème, veuillez le signaler via l'interface de contact.\");\n          localStorage.setItem(\"oldversion\", \"1\");\n        }\n      }\n\n      this.startapp();\n    }\n\n    startapp() {\n      var locs = [{\n        city: \"Tunis\",\n        lat: 33.8439408,\n        lng: 9.400138\n      }, {\n        city: \"Sfax\",\n        lat: 34.739739,\n        lng: 10.7598516\n      }, {\n        city: \"Sousse\",\n        lat: 35.828829,\n        lng: 10.640525\n      }, {\n        city: \"Kairouan\",\n        lat: 35.6775263,\n        lng: 10.1006205\n      }, {\n        city: \"Kebili\",\n        lat: 33.7058066,\n        lng: 8.9705891\n      }, {\n        city: \"Bizerte\",\n        lat: 37.2732415,\n        lng: 9.8713665\n      }, {\n        city: \"Sidi Bouzid\",\n        lat: 34.881181,\n        lng: 9.52635984718234\n      }, {\n        city: \"Gabes\",\n        lat: 33.8833922,\n        lng: 10.0971389\n      }, {\n        city: \"Ariana\",\n        lat: 36.859939,\n        lng: 10.190973\n      }, {\n        city: \"Jendouba\",\n        lat: 36.5013895,\n        lng: 8.7811635\n      }, {\n        city: \"Gafsa\",\n        lat: 34.425149,\n        lng: 8.786218\n      }, {\n        city: \"Beja\",\n        lat: 36.7270373,\n        lng: 9.1814915\n      }, {\n        city: \"Kasserine\",\n        lat: 35.1691517,\n        lng: 8.8364635\n      }, {\n        city: \"Monastir\",\n        lat: 35.7398399,\n        lng: 10.7986953383714\n      }, {\n        city: \"Tataouine\",\n        lat: 32.929216,\n        lng: 10.451229\n      }, {\n        city: \"Ben Arous\",\n        lat: 36.7488603,\n        lng: 10.22460082\n      }, {\n        city: \"Mahdia\",\n        lat: 35.48810105,\n        lng: 10.9626808407717\n      }, {\n        city: \"El Kef\",\n        lat: 36.1675068,\n        lng: 8.7043493\n      }, {\n        city: \"Nabeul\",\n        lat: 36.4823676,\n        lng: 10.6707196978804\n      }, {\n        city: \"Manouba\",\n        lat: 36.8115973,\n        lng: 10.0857631871932\n      }, {\n        city: \"Tozeur\",\n        lat: 33.913485,\n        lng: 8.11182407105263\n      }, {\n        city: \"Zaghouan\",\n        lat: 36.41171955,\n        lng: 10.2019797844446\n      }, {\n        city: \"Medenine\",\n        lat: 33.339592,\n        lng: 10.491185\n      }, {\n        city: \"Siliana\",\n        lat: 36.085041,\n        lng: 9.369468\n      }];\n      var lat = 0;\n      var lng = 0;\n\n      function acceptitdamnit() {\n        alert(\"Veuillez activer et accepter l'accès du GPS pour cette application afin qu'elle puisse fonctionner.\");\n        navigator.geolocation.getCurrentPosition(position => {}, error => {\n          acceptitdamnit();\n        });\n      }\n\n      navigator.geolocation.getCurrentPosition(position => {}, error => {\n        acceptitdamnit();\n      });\n      var routex = window.location.href;\n\n      if (routex.includes('/a-fr')) {\n        if (localStorage.getItem(\"adminnom\")) {\n          const httpOptions = {\n            headers: new HttpHeaders()\n          };\n          httpOptions.headers.append('Access-Control-Allow-Origin', '*');\n          httpOptions.headers.append('Content-Type', 'application/json');\n          httpOptions.headers.append('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n          var username = localStorage.getItem(\"adminnom\");\n          var password = localStorage.getItem(\"adminp\"); // @ts-ignore\n\n          var cpassword = SHA256(password).toString(enc.Hex); // @ts-ignore\n\n          var x = username.replace(' ', '_');\n          this.http.get(\"https://greencity-tn-default-rtdb.europe-west1.firebasedatabase.app/adminaccounts/\" + x + \"-\" + cpassword + \".json\", httpOptions).subscribe(responseData => {\n            if (responseData != null) {\n              if (routex.includes('/a-fr-home')) {\n                this._router.navigate(['/a-fr-reports']);\n              } else if (routex.includes('/a-fr-reports')) {\n                this._router.navigate(['/a-fr-reports']);\n              } else if (routex.includes('/a-fr-accounts')) {\n                this._router.navigate(['/a-fr-accounts']);\n              } else if (routex.includes('/a-fr-events')) {\n                this._router.navigate(['/a-fr-events']);\n              } else if (routex.includes('/a-fr-messages')) {\n                this._router.navigate(['/a-fr-messages']);\n              } else if (routex.includes('/a-fr-adminaccounts')) {\n                this._router.navigate(['/a-fr-adminaccounts']);\n              } else if (routex.includes('/a-fr-info')) {\n                this._router.navigate(['/a-fr-info']);\n              } else if (routex.includes('/a-fr-approved')) {\n                this._router.navigate(['/a-fr-approved']);\n              } else {\n                this._router.navigate(['/a-fr-home']);\n              }\n            } else {\n              alert(\"Les informations d'identification existantes ne sont plus valides. Veuillez vous connecter avec d'autres informations d'identification.\");\n\n              this._router.navigate(['/a-fr-home']);\n            }\n          });\n        } else {\n          this._router.navigate(['/a-fr-home']);\n        }\n      } else {\n        if (localStorage.getItem(\"launch\")) {} else {\n          localStorage.setItem(\"launch\", \"0\");\n        }\n\n        if (localStorage.getItem(\"launch\") == \"0\") {\n          this._router.navigate(['/home']);\n        }\n\n        if (localStorage.getItem(\"launch\") == \"fr\") {\n          if (routex.includes('/fr-events')) {\n            this._router.navigate(['/fr-events']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-info')) {\n            this._router.navigate(['/fr-info']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-profile')) {\n            this._router.navigate(['/fr-profile']);\n\n            return;\n          }\n\n          if (routex.includes('/fr-contact')) {\n            this._router.navigate(['/fr-contact']);\n\n            return;\n          }\n\n          this._router.navigate(['/fr-news']);\n        }\n\n        if (localStorage.getItem(\"startup\") == \"ar\") {\n          this._router.navigate(['/ar-news']);\n        }\n\n        if (localStorage.getItem(\"startup\") == \"en\") {\n          this._router.navigate(['/en-news']);\n        }\n      }\n    }\n\n    startfr() {\n      localStorage.setItem(\"startup\", \"fr\");\n\n      this._router.navigate(['/fr-news']);\n    }\n\n    startar() {\n      localStorage.setItem(\"startup\", \"ar\");\n\n      this._router.navigate(['/ar-news']);\n    }\n\n    starten() {\n      localStorage.setItem(\"startup\", \"en\");\n\n      this._router.navigate(['/en-news']);\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 1,\n    vars: 0,\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"router-outlet\");\n      }\n    },\n    directives: [i2.RouterOutlet],\n    styles: [\"\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}